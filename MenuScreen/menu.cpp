#include <iostream>
#include <sys/ioctl.h>
#include <stdio.h>
#include <cstdlib>
#include <unistd.h>
#include <ncurses.h>
using namespace std;

// Screen Size = 200x60

// Declaring screen function
void loading_screen();
void home_screen(int input, int select, int max_choice);



// Menu
int main() {

    // Screen setup
    system("clear");
    erase();
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    initscr();
    cbreak();
    noecho();
    keypad(stdscr, TRUE);

    // Menu variables
    int input;
    int select = 1;
    int max_choice = 4; // adjustable depends on how many choices

    // Screen check to make sure the player is on optimized screen size
    printw("Before playing the game, please make sure that the terminal size is enough for the game to be printed.");
    printw("The minimum requirement of the terminal size is 200x60.");
    printw("Press any key to continue.");
    while ((input = getch()) != KEY_F(1)) {
        // Check size
        struct winsize w;
        ioctl(STDOUT_FILENO, TIOCGWINSZ, &w);
        erase();
        if (w.ws_row >= 60 && w.ws_col >= 200) { // Scrren size is enough
            break;
        } else { // Not yet
            printw("Current terminal size: %dx%d", w.ws_col, w.ws_row);
        }
    }

    // Screen (first start-up)
    loading_screen();
    home_screen(input, select, max_choice);

    // Menu Screen
    
    // Home screen choosing
    while ((input = getch()) != KEY_F(1)) {
        // Receiving input
        cout << "\033[22;0H";
        if (input == 119 || input == 259) { // down
            select -= 1;
        } else if (input == 115 || input == 258) { // up
            select += 1;
        } else if (input == 10) { // enter
            system("clear");
            cout << "ENTER" << endl;
            usleep(1000000);
            break;
        }
        if (select <= 0) {
            select = max_choice;
        } else if (select > max_choice) {
            select = 1;
        }

        // Screen
        home_screen(input, select, max_choice);
    }
    endwin();
}



// Loading screen
void loading_screen() {
    erase();
    printw("█░░ █▀█ ▄▀█ █▀▄ █ █▄░█ █▀▀");
    printw("█▄▄ █▄█ █▀█ █▄▀ █ █░▀█ █▄█");
    cout << endl;
    for (int i = 0; i <= 70; i++) {
        cout << "\033[5;0H"; // change coordinate here
        for (int j = 0; j < i; j++) {
            cout << "\033[31;41m \033[0m";
        }
        for (int j = i; j < 70; j++) {
            cout << "\033[3;100;30m \033[0m";
        }
        cout << endl;
        usleep(30*(70-i)*(70-i));
    }
    usleep(3000000);
    erase();
}

// Home screen
void home_screen(int input, int select, int max_choice) {
    
    // Title
    cout << "\033[6;0H"  << "────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────" << endl;
    cout << "\033[7;0H"  << "──────────────────────────────────────██████████████───────────────────████████████████─────███████████████───██████████████───██████████████───████████████████────────────────────────────────────────" << endl;
    cout << "\033[8;0H"  << "──────────────────────────────────────██░░░░░░░░░░██───────────────────██░░░░░░░░░░░░██─────██░░░░░░░░░░░██───██░░░░░░░░░░██───██░░░░░░░░░░██───██░░░░░░░░░░░░██────────────────────────────────────────" << endl;
    cout << "\033[9;0H"  << "──────────────────────────────────────██░░██████████───────────────────██░░████████░░██─────██░░███████░░██───██░░██████████───██░░██████████───██░░████████░░██────────────────────────────────────────" << endl;
    cout << "\033[10;0H" << "──────────────────────────────────────██░░██───────────────────────────██░░██────██░░██─────██░░██───██░░██───██░░██───────────██░░██───────────██░░██────██░░██────────────────────────────────────────" << endl;
    cout << "\033[11;0H" << "──────────────────────────────────────██░░██───────────█████████████───██░░████████░░██─────██░░███████░░██───██░░██───────────██░░██████████───██░░████████░░██────────────────────────────────────────" << endl;
    cout << "\033[12;0H" << "──────────────────────────────────────██░░██───────────██░░░░░░░░░██───██░░░░░░░░░░░░██─────██░░░░░░░░░░░██───██░░██───────────██░░░░░░░░░░██───██░░░░░░░░░░░░██────────────────────────────────────────" << endl;
    cout << "\033[13;0H" << "──────────────────────────────────────██░░██───────────█████████████───██░░██████░░████─────██░░███████░░██───██░░██───────────██░░██████████───██░░██████░░████────────────────────────────────────────" << endl;
    cout << "\033[14;0H" << "──────────────────────────────────────██░░██───────────────────────────██░░██──██░░██───────██░░██───██░░██───██░░██───────────██░░██───────────██░░██──██░░██──────────────────────────────────────────" << endl;
    cout << "\033[15;0H" << "──────────────────────────────────────██░░██████████───────────────────██░░██──██░░██████───██░░██───██░░██───██░░██████████───██░░██████████───██░░██──██░░██████──────────────────────────────────────" << endl;
    cout << "\033[16;0H" << "──────────────────────────────────────██░░░░░░░░░░██───────────────────██░░██──██░░░░░░██───██░░██───██░░██───██░░░░░░░░░░██───██░░░░░░░░░░██───██░░██──██░░░░░░██──────────────────────────────────────" << endl;
    cout << "\033[17;0H" << "──────────────────────────────────────██████████████───────────────────██████──██████████───██████───██████───██████████████───██████████████───██████──██████████──────────────────────────────────────" << endl;
    cout << "\033[18;0H" << "────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────" << endl;

    cout << "\033[50;190H" << "@GROUP-70" << endl;

    // Screen
    
    cout << "\033[33;43H" << "\033[93m           █▀█ █░░ ▄▀█ █▄█\033[0m" << endl;
    cout << "\033[34;43H" << "\033[93m           █▀▀ █▄▄ █▀█ ░█░\033[0m" << endl;
    cout << endl;
    cout << "\033[37;43H" << "\033[93m           █▀ █▀▀ ▀█▀ ▀█▀ █ █▄░█ █▀▀ █▀\033[0m" << endl;
    cout << "\033[38;43H" << "\033[93m           ▄█ ██▄ ░█░ ░█░ █ █░▀█ █▄█ ▄█\033[0m" << endl;
    cout << endl;
    cout << "\033[41;43H" << "\033[93m           █▀▀ █▀█ █▀▀ █▀▄ █ ▀█▀ █▀\033[0m" << endl;
    cout << "\033[42;43H" << "\033[93m           █▄▄ █▀▄ ██▄ █▄▀ █ ░█░ ▄█\033[0m" << endl;
    cout << endl;
    cout << "\033[45;43H" << "\033[93m           █▀▀ ▀▄▀ █ ▀█▀\033[0m" << endl;
    cout << "\033[46;43H" << "\033[93m           ██▄ █░█ █ ░█░\033[0m" << endl;
    
    switch (select) {
        case 1:
            cout << "\033[33;43H" << "\033[31m▀▀ ▀▀ ▀▀   █▀█ █░░ ▄▀█ █▄█\033[0m" << endl;
            cout << "\033[34;43H" << "\033[31m▀▀ ▀▀ ▀▀   █▀▀ █▄▄ █▀█ ░█░\033[0m" << endl;
            break;
        case 2:
            cout << "\033[37;43H" << "\033[31m▀▀ ▀▀ ▀▀   █▀ █▀▀ ▀█▀ ▀█▀ █ █▄░█ █▀▀ █▀\033[0m" << endl;
            cout << "\033[38;43H" << "\033[31m▀▀ ▀▀ ▀▀   ▄█ ██▄ ░█░ ░█░ █ █░▀█ █▄█ ▄█\033[0m" << endl;
            break;
        case 3:
            cout << "\033[41;43H" << "\033[31m▀▀ ▀▀ ▀▀   █▀▀ █▀█ █▀▀ █▀▄ █ ▀█▀ █▀\033[0m" << endl;
            cout << "\033[42;43H" << "\033[31m▀▀ ▀▀ ▀▀   █▄▄ █▀▄ ██▄ █▄▀ █ ░█░ ▄█\033[0m" << endl;
            break;
        case 4:
            cout << "\033[45;43H" << "\033[31m▀▀ ▀▀ ▀▀   █▀▀ ▀▄▀ █ ▀█▀\033[0m" << endl;
            cout << "\033[46;43H" << "\033[31m▀▀ ▀▀ ▀▀   ██▄ █░█ █ ░█░\033[0m" << endl;
            break;
    }
}